/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   compair.c                                          :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: mnesfane <mnesfane@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2022/03/19 17:50:05 by mhanda            #+#    #+#             */
/*   Updated: 2022/04/04 00:49:19 by mnesfane         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "push_swap.h"

// int	maxpos(t_data *ptr)
// {
// 	t_list *tmp;
// 	tmp = ptr->stack_top_b;
// 	int 
// 	while (tmp)
// 	{
// 		printf ("l%dl\n ", tmp->data);
// 		if (ptr->maxb->data == ptr->stack_top_b->data)
// 			brea
// 		tmp = tmp->link;
// 	}
// 	// printf ("l%dl\n ", maxps);
// 	return (tmp);
// }

// void	do_rrb(t_data *ptr)
// {
// 	t_list *tmp;
	
// 	tmp = ptr->stack_top_b;	
// 	while (ptr->maxb->data != tmp->data)
// 		rrb(ptr);
// 	// printf ("+%d+", tmp->data);
// 	pa(ptr);
// 	free(tmp);
// }
// void	do_rb(t_data *ptr)
// {
// 	t_list *tmp;
	
// 	tmp = ptr->stack_top_b;	
// 	while (ptr->maxb->data != tmp->data)
// 		rb(ptr);
// 	// printf ("+%d+", tmp->data);
// 	pa(ptr);
// 	// free(tmp);
// 	// exit (0);
// }
int max_a(t_data *ptr)
{
	t_list *tmp;
	tmp = ptr->stack_top_a;
	ptr->maxa = ptr->stack_top_a;
	// printf ("//%d//", ptr->maxb->data);
	
	while (ptr->stack_top_a)
	{
		if (ptr->stack_top_a->data > ptr->maxa->data)
		{
			ptr->maxa = ptr->stack_top_a;
			// ptr->point++;
		}
		ptr->stack_top_a = ptr->stack_top_a->link;
	}
	// printf ("/%d/", ptr->maxa->data);
	ptr->stack_top_a = tmp;
	return (ptr->maxa->data);
}

int get_len(t_data *ptr)
{	
	t_var var;
	t_list *tmp;
	var.len = 0;
	tmp = ptr->stack_top_b;
	while (tmp->link)
	{
		var.len++;
		tmp = tmp->link;
	}
	ptr->lenb = var.len;
	var.len = var.len / 2;
	return (var.len);
}

void	push_to_a(t_data *ptr)
{
	t_list *tmp;
	
	tmp = ptr->stack_top_a;
	get_len(ptr);
	while (ptr->lenb != 0)
	{
		max(ptr);
		if (maxpos(ptr) <= get_len(ptr))
		{
			while(maxpos(ptr))
			{
				rb(ptr);
				ptr->point--;
	 		}
			pa(ptr);
		}
		
		else if (maxpos(ptr) > get_len(ptr))
		{
			while(maxpos(ptr))
			{
				rrb(ptr);
				ptr->point--;
			}
			pa(ptr);
		}
	}
}

int	maxpos(t_data *ptr)
{
	t_list *tmp;
	
	tmp = ptr->stack_top_b;
	ptr->point = 0 ;
	while (tmp != ptr->maxb)
	{
		ptr->point++;
		tmp = tmp->link;
	}
	return (ptr->point);
}

void max(t_data *ptr)
{
	t_list *tmp;
	tmp = ptr->stack_top_b;
	ptr->maxb = ptr->stack_top_b;
	
	while (ptr->stack_top_b)
	{
		if (ptr->stack_top_b->data > ptr->maxb->data)
		{
			ptr->maxb = ptr->stack_top_b;
		}
		ptr->stack_top_b = ptr->stack_top_b->link;
	}
	ptr->stack_top_b = tmp;
}
void	laod_stack_tmp(t_data *ptr)
{
	t_list *str;
	t_list *tmp2;
	
	str = malloc(sizeof(t_list));
	str->link = NULL;
	ptr->tmp_sort = str;
	tmp2 = ptr->stack_top_a;
	while (ptr->stack_top_a)
	{
		str->data = ptr->stack_top_a->data;
		str->link = NULL;
		if (ptr->stack_top_a->link)
		{
			str->link = malloc(sizeof(t_list));
			str = str->link;
		}
		ptr->stack_top_a = ptr->stack_top_a->link;
	}
	sateff (ptr);
	ptr->stack_top_a = tmp2;
}

void	cmp(t_list *goldnum, t_list *g, t_data *ptr)
{
	t_list *tmp;
	t_var var;
	tmp = ptr->stack_top_a;

	while (tmp)
	{
		if (tmp->data > goldnum->data)
			var.f++;
		if (tmp->data <= goldnum->data)
		{
			while (var.f)
			{
				ra(ptr);
				var.f--;
			}
			pb(ptr);
			tmp = ptr->stack_top_a;
			if (ptr->stack_top_b->link)
				if (ptr->stack_top_b->data < g->data)
				{
					if (ptr->stack_top_a->data > goldnum->data)
						double_mouve_ss_rr_rrr(ptr, 1);
					else
						rb(ptr);
				}
		}
		else
			tmp = tmp->link;
	}
}

void compair(t_data *ptr)
{
	// exit(0);
	t_var var;
	t_list *goldnum;
	t_list *tmp;
	t_list *g;
	tmp = ptr->tmp_sort;
	var.len = 0;
	while (ptr->tmp_sort)
	{
		var.len++;
		ptr->tmp_sort = ptr->tmp_sort->link; 
	}
	ptr->tmp_sort = tmp;
	var.len = var.len / 10;
	var.i = var.len / 4; //4 :   5275
	while (var.len)
	{
		ptr->tmp_sort = ptr->tmp_sort->link;
		var.len--;
	}
	goldnum = ptr->tmp_sort;
	ptr->tmp_sort = tmp;
	 while (var.i)
	{
		ptr->tmp_sort = ptr->tmp_sort->link;
		var.i--;
	}
	g = ptr->tmp_sort;
	free(ptr->tmp_sort);
	cmp(goldnum, g, ptr);	
}

//1997041613 -1430074696 -1399812352 -762500052 -517908338 -927092770 -24457433 -182227534 1062173547 -1896126774 -1201270602 323839008 -1075936385 -1141869945 -32151687 1942053897 808762993 1414716959 348072574 1793289010 885194125 11681281 522782285 1800953746 -994112855 -1944671779 1331257520 -1917827879 1901710347 -1595209166 -1462260359 -1373010387 -1571567399 -751390698 683667603 -2102040018 408406555 -1270597302 784611236 -39665043 -1003520052 -1280662566 1577975649 -813792067 357423349 -534687027 -2027408906 -781211383 -1766225961 -1723046422 1323979836 1788150425 553118829 541544922 -2127034420 1434785182 957662868 503006155 -967836004 -47283553 -885016549 1245584489 -1862009398 -665390119 -1682058644 -1472763324 -1990471224 -150715209 70792294 -1057727191 1801582981 -1737233287 -446466556 -160746933 -1849116955 728624384 1154874571 -850276298 -1584872110 408774327 2052831510 1927961222 -138679077 -1270089590 2067271202 1487044751 -1928569418 1063626947 -1155305117 308426444 1577420604 -1635998813 1952501373 271395397 -450186286 -1488784763 781275478 -1937592388 109288357 1608792174 -1015208609 -1698533987 2116348757 -15222112 -1508613777 467158569 1984837669 -1481429551 -1466962972 898938470 -415438884 -134036284 962405795 -1447499466 -774257876 1477785795 1499137530 1837241572 1354170942 -452495528 471404890 866183981 -563922394 -1412973998 -821780370 -1355855067 459875210 -1306546573 -1109385413 -1703393720 1538016889 -1601663411 2020059747 -948665587 -1797624330 1610754211 942156316 470212351 1837942552 1558744511 1888870008 -2135476356 1211064907 713652117 464558461 -522303911 -1285859208 147985937 1693561559 278209611 -270204978 362102300 -855176052 396109530 556021696 -749863197 -1930469187 -310056833 -1032892332 1582291467 -57129693 -1444537129 1298924337 -1916410079 926772116 1620577243 -1190057274 -989889543 1908907403 -1472555864 1279790673 838484084 -1624201939 -1580792073 1069087842 873677989 -1137094336 -985345570 717420707 -1823083425 -741466396 465198809 -940888339 -1050597165 -2025346523 1317822744 -542920259 -1289840969 -794689385 -105056929 1178789930 1403069348 1293913724 -1324879374 -1266760418 1203299329 -264613617 778496223 183393223 328309050 515602835 -1246177573 -1871222321 1364424375 -397505632 337626375 -1166486970 835932823 -1853797042 677206413 797932513 -1282484741 1733240231 -1183683378 130769319 268120911 -2053050054 -1529905212 1510166406 438276432 -1855971667 -800089211 -426178443 2139788133 363654431 255009123 1324019925 1260049467 774259675 -820537687 -599047236 -144183570 -674640848 -177182828 1393986584 -1643444715 -1507021984 -2003450897 -2057413678 1205164229 875088915 -2038634752 -941313505 744335288 -1566806833 1854086568 -172669330 -1867831811 -802805803 1802153578 -1579541631 1421287659 -251926168 -1484723501 46712277 379949359 -682188640 1574039311 1435941048 -188205719 648678799 1959331770 -1430471464 -1790223297 -1251462030 930993261 -780854058 -2092963476 344124716 1396053614 -1598123494 188892075 -1298548332 1539743656 -1511735723 -165578003 -644431354 2043569748 1310237599 -1560556829 -1977505846 1991870145 974103501 -1572696702 -43153598 -2042850731 -463040113 1009951835 1015648627 1392717723 771887239 -2081088044 -1029312092 215515183 1469419861 -561979405 129824272 1619080910 301495681 277845650 -608566810 -223581548 -1397599180 2112228096 -210659170 -173987822 -1574660272 -1111758244 -467436029 975587884 1846901074 1318615702 -2053596645 -1821773035 263460373 -1273384037 1750189365 1292693200 -1215676158 -375988942 -1380356457 776638971 973591677 1294869507 -1365934511 -1410651176 1426126194 -1627640109 -1397416154 -1009252936 1641439237 1822259472 -765810181 -1796967956 -1874092136 -1572444830 -1052059598 1661077811 -2143743550 -1469576123 1936768245 652352563 -1828259566 -1203175849 -443202103 -669259167 -516757825 -1676940862 -522809837 1406722966 1710186370 853368237 -1894443680 -1267491630 137206699 -498490630 1913528815 -1799036653 -820144397 -2109534105 -639421619 1137957612 -1121715002 1504497442 602148606 -1380311785 120096771 -1036100115 1789889569 -1189746822 -793730105 495421063 -1954502057 -2112824205 -408176386 -961942310 -78643697 -227321250 249750225 -2088279293 420790319 -687276026 -1921869578 1903133688 -205974032 -1957186483 74601403 -1486448386 1177769802 -1894012250 -1538247490 1853283311 -500252321 1280908132 2129879563 -1709531783 1474041450 -1735671430 914861555 2043666429 899991144 549782886 -1499907622 1279892351 -1818347110 -2131240912 -2046934254 251171770 -275447362 -1077981343 -722564747 1185234696 1215889629 -1510767904 -1058083815 -798381079 -2137929618 857876756 1592465047 1008425145 -1219229433 144722607 1846023411 1464149609 489184881 -1412104248 -879788365 478164348 -359169158 2023774929 -861827773 -777711148 2064902621 -751269152 -988607163 596134335 -517980063 2040687626 1438649091 1213639921 2135417973 317532678 -1040263425 451113739 973319447 1177886521 925069938 695517679 -2031853648 1891560375 256896976 183840673 1705567821 -718274550 -1641450935 1691938035 -1580253039 -1178511954 228838395 1526630451 1166645276 -1903567775 45179096 -1743419904 -852310741 -956538615 498430192 -149784214 470175866 1794664685 -828901816 -2080522280 -1075111643 1738746264 -2002554160 -1959293193 -673742913 -1822325411 354629280 942193508 -2096257264 1070769943 1867120102 2128759123 1142975482 500766099 1323876451 752627295 -947439895 -497305188 -1032227665 -1325430135 -2090105025 871147840 -859677775 -673227531 -2036294983 -1447539765 308845528 -100853873 